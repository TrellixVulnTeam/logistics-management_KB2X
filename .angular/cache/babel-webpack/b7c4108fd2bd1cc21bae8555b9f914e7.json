{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/apple/Desktop/LMGame/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"/Users/apple/Desktop/LMGame/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/apple/Desktop/LMGame/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { GamingDataService } from '../services/gaming-data.service';\nimport { LoginDetailsService } from './../services/login-details.service';\nimport { Router } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/gaming-data.service\";\nimport * as i2 from \"./../services/login-details.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../admin-menu/admin-menu.component\";\nimport * as i5 from \"@angular/flex-layout/flex\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/list\";\nimport * as i8 from \"@angular/material/core\";\n\nfunction GameRecordsComponent_div_7_mat_list_item_2_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-list-item\");\n    i0.ɵɵelementStart(1, \"a\", 4);\n    i0.ɵɵlistener(\"click\", function GameRecordsComponent_div_7_mat_list_item_2_Template_a_click_1_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r5);\n      var username_r2 = restoredCtx.$implicit;\n      var ctx_r4 = i0.ɵɵnextContext(2);\n      return ctx_r4.jumpToRecords(username_r2);\n    });\n    i0.ɵɵelementStart(2, \"h3\", 5);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var username_r2 = ctx.$implicit;\n    var i_r3 = ctx.index;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", i_r3 + 1, \". \", username_r2, \" \");\n  }\n}\n\nfunction GameRecordsComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵelementStart(1, \"mat-list\");\n    i0.ɵɵtemplate(2, GameRecordsComponent_div_7_mat_list_item_2_Template, 4, 2, \"mat-list-item\", 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.usernameUnique);\n  }\n}\n\nexport var GameRecordsComponent = /*#__PURE__*/(function () {\n  var GameRecordsComponent = /*#__PURE__*/function () {\n    function GameRecordsComponent(gamingDataService, loginDetailsService, router, baseURL) {\n      _classCallCheck(this, GameRecordsComponent);\n\n      this.gamingDataService = gamingDataService;\n      this.loginDetailsService = loginDetailsService;\n      this.router = router;\n      this.baseURL = baseURL;\n      this.usernameUnique = [];\n      this.unameFlag = true;\n      this.userFound = false;\n      this.uid = -1;\n    }\n\n    _createClass(GameRecordsComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        this.getRecordsfromDatabase();\n        this.getLoginRecordsfromDatabase();\n      }\n    }, {\n      key: \"getLoginRecordsfromDatabase\",\n      value: function getLoginRecordsfromDatabase() {\n        var _this = this;\n\n        this.loginDetailsService.getLoginDetailsf().subscribe(function (loginDetails) {\n          _this.USERS = loginDetails.map(function (data) {\n            return Object.assign({\n              email: data.payload.doc.id\n            }, data.payload.doc.data());\n          });\n        });\n      }\n      /**\n      * @desc Getting Users Gaming Data form the database\n      **/\n\n    }, {\n      key: \"getRecordsfromDatabase\",\n      value: function getRecordsfromDatabase() {\n        var _this2 = this;\n\n        this.gamingDataService.getAllUserGamingDataf().subscribe(function (gData) {\n          _this2.GameRecords = gData.map(function (data) {\n            return Object.assign({\n              username: data.payload.doc.id\n            }, data.payload.doc.data());\n          });\n          _this2.records = _this2.GameRecords;\n\n          _this2.uniqueUsernames();\n        });\n      }\n      /**\n      * @desc Mapping only the unique usernames from the fetched data\n      **/\n\n    }, {\n      key: \"uniqueUsernames\",\n      value: function uniqueUsernames() {\n        var _iterator = _createForOfIteratorHelper(this.records),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var record = _step.value;\n            this.unameFlag = true;\n\n            var _iterator2 = _createForOfIteratorHelper(this.usernameUnique),\n                _step2;\n\n            try {\n              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                var uname = _step2.value;\n\n                if (record.username == uname) {\n                  this.unameFlag = false;\n                }\n              }\n            } catch (err) {\n              _iterator2.e(err);\n            } finally {\n              _iterator2.f();\n            }\n\n            if (this.unameFlag == true) {\n              this.usernameUnique.push(record.username);\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n      /**\n       * @desc To jump to the records of the user clicked\n       */\n\n    }, {\n      key: \"jumpToRecords\",\n      value: function jumpToRecords(username) {\n        console.log(username);\n        this.getLoginRecordsfromDatabase();\n\n        for (var i = 0; i < this.USERS.length; i++) {\n          if (this.USERS[i].email == username) {\n            this.uid = this.USERS[i].id;\n            this.userFound = true;\n            break;\n          }\n        }\n\n        if (this.userFound == true) {\n          this.router.navigate(['/admin/record', this.uid]);\n        }\n      }\n    }]);\n\n    return GameRecordsComponent;\n  }();\n\n  GameRecordsComponent.ɵfac = function GameRecordsComponent_Factory(t) {\n    return new (t || GameRecordsComponent)(i0.ɵɵdirectiveInject(i1.GamingDataService), i0.ɵɵdirectiveInject(i2.LoginDetailsService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject('BaseURL'));\n  };\n\n  GameRecordsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: GameRecordsComponent,\n    selectors: [[\"app-game-records\"]],\n    decls: 8,\n    vars: 1,\n    consts: [[\"fxLayout\", \"column\", \"fxLayoutGap\", \"10px\", 1, \"container\"], [\"fxFlex\", \"\"], [\"fxFlex\", \"\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [3, \"click\"], [\"matLine\", \"\"]],\n    template: function GameRecordsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-admin-menu\");\n        i0.ɵɵelementStart(1, \"div\", 0);\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵelementStart(3, \"div\");\n        i0.ɵɵelementStart(4, \"h3\");\n        i0.ɵɵtext(5, \"Users\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(6, \"hr\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(7, GameRecordsComponent_div_7_Template, 3, 1, \"div\", 2);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ctx.usernameUnique);\n      }\n    },\n    directives: [i4.AdminMenuComponent, i5.DefaultLayoutDirective, i5.DefaultLayoutGapDirective, i5.DefaultFlexDirective, i6.NgIf, i7.MatList, i6.NgForOf, i7.MatListItem, i8.MatLine],\n    styles: [\"\"]\n  });\n  return GameRecordsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}